---
title: "Part A - Lego Analysis"
format: pdf
editor: visual
---

## Analysis of Lego

```{r}
#| message: false
#| warning: false
# Loading libraries

library(tidyverse)
library(tidytuesdayR)
library(ggplot2)
library(scales)
```

Reading in dataset

```{r}
#| message: false
#| warning: false

# Read data from tidytuesday
tuesdata = tidytuesdayR::tt_load('2022-09-06')

for (name in names(tuesdata)) 
{var_name = gsub("\\.csv$", "", name) 
  assign(var_name, tuesdata[[name]])}

rm(tuesdata)
```

Explore data

```{r}
head(colors)
head(elements)
head(inventories)
head(inventory_minifigs)
head(inventory_parts)
head(inventory_sets)
head(minifigs)
head(part_categories)
head(part_relationships)
head(parts)
head(sets)
head(themes)
```

Considering the popularity of Lego, which is the most popular and the least popular themes of Lego.

```{r}
# Joining sets with themes and filtering out the sets with no parts due to error in data collection
set_themes = sets |>
  left_join(themes |>
              select(id, theme_name = name), 
              by = c(theme_id = "id")) |>
  mutate(numparts = na_if(num_parts, 0))

# Finding out the most popular themes
most_popular = set_themes |>
  group_by(theme_name) |>
  summarize(total_sets = n(), .groups = "drop") |>
  arrange(desc(total_sets)) |>
  head(20) |>
  ggplot(aes(x = total_sets, y = reorder(theme_name, total_sets))) +
  geom_bar(stat = "identity", aes(fill = total_sets)) +
  scale_fill_gradient(low = "#00648C", high = "#00BC8C")+
  labs(title = "All time most popular lego themes",
       x = "Total number of sets",
       y = "Theme") +
  theme_minimal()

# Finding out the least popular themes
least_popular = set_themes |>
  group_by(theme_name) |>
  summarize(total_sets = n(), .groups = "drop") |>
  arrange(desc(total_sets)) |>
  tail(20) |>
  ggplot(aes(x = total_sets, y = reorder(theme_name, total_sets))) +
  geom_bar(stat = "identity", aes(fill = total_sets)) +
  scale_fill_gradient(low = "#00648C", high = "#00BC8C")+
  labs(title = "All time least popular lego themes",
       x = "Total number of sets",
       y = "Theme") +
  theme_minimal()

most_popular
least_popular
```

### Most Popular LEGO Themes

1.  Gear is the most popular LEGO theme of all time, with over 2,000 sets released. This category includes accessories like keychains, stationery, and other merchandise, showing strong demand for LEGO-branded items beyond traditional building sets.

2.  Star Wars comes in second with over 1,000 sets. Thanks to its powerful movie franchise, this theme appeals to both young fans and adult collectors and has remained a top performer for decades.

3.  Technic also has over 1,000 sets and is popular among those who enjoy engineering-style builds. It’s known for its complex mechanical features and realistic designs, attracting older children and adult hobbyists.

4.  Other top themes include Key Chain, Friends, Books, and Basic Set, each with several hundred sets. This shows that LEGO successfully targets a variety of age groups and interests.

### Least Popular LEGO Themes

1.  Many themes, such as Zooters, X-Men, Wolfpack, and Stranger Things, have only 1 to 3 sets. These were likely experimental or niche product lines that did not gain enough traction to expand.

2.  Themes like Sculptures, eLAB, and Miles From Tomorrowland may have targeted specialized audiences, but limited appeal resulted in minimal set releases.

3.  Some licensed themes, such as The Powerpuff Girls, Fantastic Beasts, and Avatar: The Last Airbender, may have faced market or licensing challenges, preventing long-term success.

### Conclusion

The most successful LEGO themes share common features: strong brand identity, wide audience appeal, and ongoing product development.The least popular themes were often short-lived, targeted at small audiences, or limited by licensing.Understanding these patterns helps LEGO and similar brands plan better product strategies and maximize market impact.

Seeing the trends of Lego sets over the years, how hard or how complex have the Lego sets become.

```{r}
theme_name_summary = set_themes |> 
  group_by(theme_name) |>
  summarize(n_sets = n(), 
            median_parts = median(num_parts)) |>
  arrange(desc(median_parts)) |> 
  filter(n_sets >= 100)

part_year = set_themes |>
  group_by(year) |>
  summarise(median_parts = median(num_parts, na.rm = TRUE), .groups = "drop") |>
  ggplot(aes(x = year, y = median_parts)) +
  geom_line(color = "#00BC8C", linewidth = 1) +
  geom_point(color = "black") +
  labs(title = "Median number of parts over the years",
       x = "Year",
       y = "Median parts per set")+
  theme_minimal()

part_year
```

### Analysis: Complexity of LEGO Sets Over the Years

1.  Early Years (1950s – early 1960s):

The chart shows a large spike in the 1950s, likely due to an outlier set with many parts.Aside from this, most sets had a low median part count, suggesting simple designs.

2.  Growth Phase (1960s – late 1970s):

There was a clear upward trend in the median number of parts per set.This indicates that LEGO sets became more complex over time, possibly due to increased design innovation and consumer interest in more detailed builds.

3.  Stabilization Period (1980s – 2020s):

After peaking in the late 1970s, the median number of parts stabilized around 40–60 parts per set.Despite some fluctuations, no significant long-term increase is observed.

4.  Recent Years (2000s – 2020s):

Complexity remained steady, with occasional dips and rises.This suggests LEGO has balanced its product line with both simple and advanced sets.

### Conclusion

LEGO sets became more complex up to the late 1970s.Since then, the median complexity has plateaued, likely due to diversification of set sizes to meet the needs of different age groups and skill levels.
